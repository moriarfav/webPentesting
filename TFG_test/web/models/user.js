//conexion a la base de datos
var db = require('.././config/mysqlConfig');

module.exports = {
    // consulta vulnerable por usuario y password
    getUser: function(usuario, password, callback){
        db.query("SELECT * FROM users WHERE usuario = '"+ usuario +"' AND password = '"+ password +"' ",function(err, rows){   
            if(err){
                console.log(err);
            }
            callback(err,rows);
        });
    }, // consulta por el nombre de usuario
    getName: function(usuario, callback){
        db.query('SELECT * FROM users WHERE usuario = ?', usuario,function(err, rows){         
            if(err){
                console.log(err);
            }
            callback(err,rows);
        });
    }, // insertar usuario
    insertUser: function(user){

        db.query('INSERT INTO users SET ?', user, function (err, rows) {
            if(err){
                console.log(err);
            }
        });
    }, // para insertar los usuarios base, reemplazandolos en caso de modificaci√≥n.
    insertFirst: function(user){

        db.query('REPLACE INTO users SET ?', user, function (err, rows) {
            if(err){
                console.log(err);
            }
        });
    }
};